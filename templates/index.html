{% extends "base.html" %}

{% block content %}
{% set blog = get_section(path="blog/_index.md") %}

<!-- Hero -->
<section class="hero">
    <h1>Hi, I'm Emil Lindfors</h1>
    <p class="hero-subtitle">I write about aquaculture, Rust programming, sensors, and the intersection of technology and nature. PhD researcher and senior software engineer based in Norway.</p>
    {% if config.extra.newsletter_endpoint %}
    <form class="newsletter-form newsletter-form--hero" action="{{ config.extra.newsletter_endpoint }}" method="POST">
        <input type="email" name="email" placeholder="your@email.com" required aria-label="Email for newsletter">
        <button type="submit">Subscribe to newsletter</button>
    </form>
    <p class="hero-rss">Or follow via <a href="{{ get_url(path='atom.xml') }}">RSS</a></p>
    {% endif %}
</section>

<!-- Featured Posts -->
{% set featured = blog.pages | filter(attribute="extra.featured", value=true) %}
{% if featured %}
<section class="featured-posts">
    <h2>Featured</h2>
    <div class="featured-grid">
        {% for page in featured | slice(end=2) %}
        <article class="featured-card">
            <a href="{{ page.permalink }}">
                <h3>{{ page.title }}</h3>
                {% if page.description %}
                <p>{{ page.description }}</p>
                {% endif %}
                <div class="featured-meta">
                    <time datetime="{{ page.date }}">{{ page.date | date(format="%B %Y") }}</time>
                    {% if page.reading_time %}
                    <span class="reading-time">{{ page.reading_time }} min read</span>
                    {% endif %}
                </div>
            </a>
        </article>
        {% endfor %}
    </div>
</section>
{% endif %}

<!-- Recent Posts -->
<section class="recent-posts">
    <h2>Recent</h2>
    {% if blog.pages %}
    <ul class="post-list">
        {% for page in blog.pages | slice(end=10) %}
        {% if not page.extra.featured %}
        <li class="post-item">
            <a href="{{ page.permalink }}">
                <span class="post-title">{{ page.title }}</span>
                <time datetime="{{ page.date }}">{{ page.date | date(format="%b %d, %Y") }}</time>
            </a>
        </li>
        {% endif %}
        {% endfor %}
    </ul>
    <a href="{{ get_url(path='blog') }}" class="view-all">View all posts &rarr;</a>
    {% else %}
    <p>No posts yet.</p>
    {% endif %}
</section>
{% endblock %}
